<!doctype html>
<html lang="en" ng-app="app">

<head>
    <meta charset="UTF-8">
    <title>Waitstaff Calculator</title>
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.0/css/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body class="blue-grey lighten-5">

    <nav class="blue-grey darken-3">
        <div class="nav-wrapper">
            <span class="brand-logo white-text">Waitstaff Calculator</span>
        </div>
    </nav>

    <div class="container" ng-controller="WaitCalcCtrl">
        <div class="row">
            <div class="col m7">
                <div class="card-panel white blue-grey-text">
                    <h4>Enter the Meal Details...</h4>
                    <form name="chargeForm" ng-submit="submit(chargeForm)" novalidate>
                        <div class="input-field">
                            <input type="number" name="sub_total" ng-model="charge.sub_total" placeholder="Meal Price, e.g. $ 45.85"
                            required>
                        </div>
                        <div class="error" ng-if="!fresh_state && chargeForm.sub_total.$error.required">
                            A Meal Price is required!
                        </div>
                        <div class="error" ng-if="!fresh_state && chargeForm.sub_total.$error.number">
                            Need a number!!
                        </div>
                        <div class="input-field">
                            <input type="number" name="tax_rate" ng-model="charge.tax_rate" placeholder="Tax Rate, e.g. 8 %"
                            required>
                        </div>
                        <div class="error" ng-if="!fresh_state && chargeForm.tax_rate.$error.required">
                            A Tax Rate is required!
                        </div>
                        <div class="error" ng-if="!fresh_state && chargeForm.tax_rate.$error.number">
                            Need a number!!
                        </div>
                        <div class="input-field">
                            <input type="number" name="tip_percentage" ng-model="charge.tip_percentage" placeholder="Tip Percentage, e.g. 20 %"
                            required>
                        </div>
                        <div class="error" ng-if="!fresh_state && chargeForm.tip_percentage.$error.required">
                            A Tip Percentage is required!
                        </div>
                        <div class="error" ng-if="!fresh_state && chargeForm.tip_percentage.$error.number">
                            Need a number!!
                        </div>
                        <div>
                            <button class="btn blue-grey darken-3 white-text" type="submit">Submit</button>
                            <button class="btn white blue-grey-text" type="button" ng-click="reset_charge()">Cancel</button>
                        </div>
                    </form>
                </div>
                <div>
                    <div class="blue-grey-text" ng-if="transaction_history.length">
                        <h4>Last 5 Transactions </h4>
                        <div ng-if="transaction_history.length > 3">
                            <button ng-hide="show_all" class="btn white pink-text" type="button" ng-click="show_all_transactions(true)">See All</button>
                            <button ng-show="show_all" class="btn white pink-text" type="button" ng-click="show_all_transactions(false)">See Less</button>
                        </div>
                        <div ng-repeat="charge in transaction_history | transaction:show_all:3">
                            <div class="card-panel white grey-text">Time: {{ charge.time }} / Total: {{ charge.charge.total | currency }}</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col m5" ng-if="transaction_history.length">
                <div class="card-panel blue-grey-text">
                    <h4>Customer Charges</h4>
                    <div>Sub Total: {{ current_charge.sub_total|currency }}</div>
                    <div>Tax: {{ current_charge.tax|currency}}</div>
                    <div>Tip: {{ current_charge.tip|currency }}</div>
                    <hr>
                    <div>Total: {{ current_charge.total|currency }}</div>
                </div>
                <div class="card-panel blue-grey-text">
                    <h4>My Earnings Info</h4>
                    <div>Tip Total: {{ staff_earnings.tip_total|currency }}</div>
                    <div>Meal Count: {{ staff_earnings.meal_count }}</div>
                    <div>Avg Tip Per Meal: {{ staff_earnings.avg_tip|currency }}</div>
                </div>
                <div>
                    <button class="btn blue-grey darken-3 white-text" type="button" ng-click="reset_all()">Reset App</button>
                </div>

            </div>
        </div>
    </div>
    <!-- Compiled and minified JavaScript -->
    <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.0/js/materialize.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular.min.js"
    type="text/javascript"></script>
    <script src="app.js" type="text/javascript"></script>
</body>

</html>
